# SQL vs NoSQL

## 1. SQL (Structured Query Language)

- RDB (관계형 데이터베이스) 에서 사용되는 언어이다.
- 데이터는 정해진 스키마에 따라 관계를 통해 여러개의 테이블에 분산되는데, 이때 레코드로 저장된다.
  각 테이블마다 명확하게 정의된 구조가 있고, 이 구조는 필드의 이름과 데이터 유형으로 정의된다.
- 스키마를 준수하지 않은 레코드는 테이블에 추가할 수 없다. 정해진 구조에 맞는 레코드만 추가할 수 있다.
- 데이터의 중복을 피하기 위해서 관계를 이용한다. <br>
  하나의 테이블에서 중복없이 하나의 데이터만을 관리하기 때문에 다른 테이블에서 정확하지 않은 데이터를 다룰 위험이 없어진다.

### 장점

- 명확하게 정의된 스키마, 데이터 무결성 보장
- 관계는 각 데이터를 중복없이 한 번만 저장
- 관계를 맺고 있는 데이터가 자주 변경되는 경우에 사용하기 좋다.

### 단점

- 유연하지 않다. 데이터 스키마를 사전에 계획하고 알려야 한다. 나중에 수정하기 힘들다.
- 관계를 맺고 있어서 조인시 복잡한 쿼리가 만들어질 수 있다.
- 대체로 수직적 확장만 가능하다.

## 2. NoSQL (Not only SQL or No SQL)

- MongoDB 기준
- 관계가 없고 SQL에서의 레코드를 document라고 부른다.
- 다른 구조의 데이터를 같은 컬렉션에 추가할 수 있다.
- document를 json과 비슷한 형태로 가지고 있고(bson), RDB처럼 여러 테이블에 나누어 저장하는것이 아니라 동일한 컬렉션에 넣는다.
- 원래는 조인 개념이 존재하지 않아 컬렉션에 저장된 데이터를 복제하여 일부에 속하는 데이터를 산출해야 하는 불편함이 있다. -> 최근 mongoDB에 lookup, aggregation기능이 추가되었다.

- key-value 타입의 NoSQL도 존재한다. (Redis, DynamoDB)

### 장점

- 유연하게 데이터를 조정하고 새로운 필드 추가 가능
- 정확한 데이터 구조를 알 수 없거나 변경/확장될 경우, 그리고 막대한 양의 데이터를 다뤄야할 경우에 좋다.

### 단점

- 데이터가 여러 컬렉션에 중복되어 있기 때문에 수정시 모든 컬렉션에서 수행해야 한다.
  (SQL에서는 중복 데이터가 없어서 한번의 수행으로 가능)

## 3. 확장

- 데이터베이스 서버의 확장성은 수직적 확장과 수평적 확장으로 나뉜다.
- 수직적 확장: 단순히 데이터베이스 서버의 성능을 향상시키는 것 (cpu 업그레이드)
- 수평적 확장: 더 많은 서버가 추가되고 db가 분산됨을 의미한다.
